"use client";

import { useMemo } from "react";
import { cn } from "@/lib/utils";

type MapProps = {
  data: { name: string; births: number }[];
  selectedState: string | null;
  onStateClick: (state: string) => void;
};

const NigeriaMap = ({ data, selectedState, onStateClick }: MapProps) => {
  const maxBirths = useMemo(() => Math.max(...data.map(d => d.births)), [data]);

  const getStateColor = (stateName: string) => {
    if (selectedState === stateName) {
      return "hsl(var(--accent))";
    }
    const stateData = data.find(d => d.name === stateName);
    if (!stateData || maxBirths === 0) {
      return "hsl(var(--border))";
    }
    const intensity = Math.round((stateData.births / maxBirths) * 100);
    // Using primary color with varying opacity
    return `hsla(var(--primary), ${intensity / 100 * 0.8 + 0.2})`;
  };

  const states = [
    { id: "NG-FC", name: "FCT - Abuja", d: "M439.51,289.43l.53,10.65-8,3.73-10.39-1.07-2.93-9.6-1.07-7.72,1.86-5.86,8.26-1.86,9.06,1.07,2.66,10.65Z" },
    { id: "NG-AB", name: "Abia", d: "M550.41,476.95l-7.72,1.33-12.25.27-11.45-4.53-2.13-10.12-3.73-11.18,4.53-11.18,5.06-2.13,12.25-1.33,13.85,1.59,2.66,13.31-.27,12.78Z" },
    { id: "NG-AD", name: "Adamawa", d: "M800.7,294.76l-11-2.26-19.12-21-14.7-16.15-20.15-2.62-6.52,4.88-21.78,13.83-8.88,2.26-16.15-2.62-10.28,1.51-12.6,11-6.15,10.28,1.88,14.32,10.28,8.88,2.26,20.15-4.88,16.15,7.28,2.26,11.38,10.65,22.15,2.26,17.25,18.41,2.62,11-13.83-2.26-19.12-11.75-10.65-2.62-12.22,4.88-15.05Z" },
    { id: "NG-AK", name: "Akwa Ibom", d: "M566.36,503.25l-2.13-10.12-7.72,1.33-12.25.27-11.45-4.53-2.13-10.12,3.73-3.2,1.06-8.25-3.46-3.73,8.52-16.51,12.25-.27,9.32,1.86,6.12,6.92,1.06,7.72.8,11.45.27,11.18-5.59,10.38Z" },
    { id: "NG-AN", name: "Anambra", d: "M510.98,432.89l-12.78-2.66-10.39-3.46-9.05,2.39-1.33,10.12,3.46,12.51,10.39,5.06,8.25.27,10.65,5.86,2.13,9.59,11.18,3.46,4-12.25-2.13-12.25-2.93-9.32-1.59-11.18Z" },
    { id: "NG-BA", name: "Bauchi", d: "M604.42,240.23l-12.92,11.5-12.42-10.68-12.08-16.52-2.93-13.43-15.82-1.7-13,9.58-12.58,1.7-12.92-12-14.25-2.93-15.58,3.78-7.83,6.5-10.25-3.35-8.92-10.68-10.25-10.68-15.42,2.5-10.42,6.5-11.75,2.92-14.42,10.25-7,9.17-10.25,5.67-12.5,2.92-11.75-2.5-16.25-10.25-2.92-11.92,2.5-9,15.75,3.33,11.08,10.25,12.5,12.08,8.33,14.67,11.92,11.08,13.75,9.42,15.25,6.08,24.25,12.92,21.5,11.92,11.5,12.92Z" },
    { id: "NG-BE", name: "Benue", d: "M581.53,354.91l-14.91-18.1-13.85-6.12-10.39,5.06-12.52,1.33-14.38-15.18-12.51-15.18-8.52,4.26-13.31,10.12-9.05,10.39-9.85,1.59-3.73,8.79,3.73,11.18,9.05,8.25,5.59,15.18,9.05,2.93,16.24,10.12,8.79,16.78,14.38,10.65,11.18,17.31Z" },
    { id: "NG-BO", name: "Borno", d: "M762.3,101.44l-12.92-7.5-15,10.25-17.5-3.33-11.25,2.92-12.5-2.92-10.42,6.67-15.42,2.5-10.25-10.67-8.92-10.67-10.25-3.33-7.83,6.5-15.58,3.75-14.25-2.92-12.92-12-12.58,1.67-13,9.58-15.83-1.71-2.92-13.46-12.08-16.5-12.42-10.67-12.92,11.5-11.92-21.5-12.92-24.25-6.08-15.25-9.42-13.75-11.08-11.92-14.67-8.33-12.08-12.5-10.25-11.08-3.33-15.75-9,2.5-11.92,10.25-2.92-8.33-2.92-10.25-4-9.83,3.75-18.58-2.92-9.17-5.67-14.42-2.92-11.08,4.42-12.75,8.17-2.75,12.5,3.58,16.42,11.67,23.58,10.42,18.58,26.83,16.42,21.08,25.42,16.83,30.83,19,25.42,11.25,24.33,26.42,17.75,30.67,11.42,28.33,14.58,14.58-6,21.42,2.33,13.17,11.25,12.08,14.38,16.42,14.17,14.17-2.33,15.63-14.58,2.83-17.46,12.29-14.83,14.38,16.15,14.7,21,19.12,11,2.26,17.21,28.75Z" },
    { id: "NG-BY", name: "Bayelsa", d: "M478.43,514.83l-11.18,2.39-10.92,10.39-4.26,9.59-10.92-1.33-6.66-5.86-13.85-6.39-2.93-11.18,5.06-11.18,9.05-4.79,16.24-9.32,15.71,6.12,5.86,9.85Z" },
    { id: "NG-CR", name: "Cross River", d: "M612.33,481.21l-15.71-3.73-10.39,3.73-11.18-17.31-14.38-10.65-8.79-16.78-16.24-10.12-9.05-2.93-5.59-15.18-9.05-8.25-3.73-11.18.27-14.65,14.38-9.59,20.24-16.51,20.77-6.12,2.66-10.92,8.25-15.98,11.18-15.18,17.57-11.45,11.98-7.46,12.51,4,13.58,10.39,15.71,11.72,13.05,2.66,12.25,1.59,16.51-1.33,12.25,12.25,11.45-3.73Z" },
    { id: "NG-DE", name: "Delta", d: "M452.93,485.87l-16.24-9.32-9.05-4.79-5.06,11.18,2.93,11.18,13.85,6.39,6.66,5.86,10.92,1.33,4.26-9.59,1.07-11.72-9.32-1.33Z" },
    { id: "NG-EB", name: "Ebonyi", d: "M566.09,421.44l-11.72-13.05-15.71-11.72-10.39-13.58-4-12.51,11.98,7.46,11.45-17.57,15.18-11.18,15.98-8.25,10.92,2.66,6.12,12.25-5.59,15.18-3.73,8.79Z" },
    { id: "NG-ED", name: "Edo", d: "M439.18,458.12l-10.12,1.06-11.45,7.72-13.58,1.33-10.12-10.92-3.46-10.92,2.39-11.98,10.12-5.86,15.71-1.59,10.92-12.78,10.12,2.39,12.78,2.66,1.59,11.18,2.93,9.32,2.13,12.25-4,12.25-11.18-3.46-2.13-9.59-10.65-5.86-8.25-.27-10.39-5.06-3.46-12.51,1.33-10.12Z" },
    { id: "NG-EK", name: "Ekiti", d: "M385.49,388l-10.92,11.45-12.25-1.59-10.38-11.18-5.86-10.92,7.72-9.85,12.78-1.86,11.45,4.53,7.46,9.59Z" },
    { id: "NG-EN", name: "Enugu", d: "M539.18,419.85l-5.59,15.18-6.12-12.25-10.92-2.66,1.59-11.18,2.93-9.32,2.13,12.25,4-12.25,11.18,3.46Z" },
    { id: "NG-GO", name: "Gombe", d: "M692.7,219.08l-21.08-25.42-16.42-26.83-10.42-18.58-23.58-11.67-16.42-3.58-12.5.25-2.75,8.17-4.42,11.08-14.42,2.92-5.67,9.17-10.25,7-14.42,10.25-11.75,2.92-10.42,6.5-15.42,2.5-10.25,10.67-15,10.25-12.92,7.5,13.58,10.25,15.25,11.5,12.92,21.5,24.25,12.92,6.08,15.25,13.75,9.42,11.08,11.92,14.67,8.33,12.08,12.5-1.5,10.58-10.75,12.83-8.83,11.92-20.92,2.83Z" },
    { id: "NG-IM", name: "Imo", d: "M526.98,471.1l-15.71,6.12-9.05,4.79-5.06-11.18-2.93,11.18-13.85,6.39.26,5.32,13.59,1.33,7.72-1.33,12.25-.27,11.45-4.53,2.13-10.12-3.73-11.18,4.53-11.18-5.06-2.13-12.25-1.33-13.85-1.59-2.66-13.31.27-12.78-7.72-1.33-1.06,8.25,3.46,3.73-1.07-2.39-9.05,3.46-10.39-12.78,2.66,10.12-2.39,10.92,12.78,15.71,1.59Z" },
    { id: "NG-JI", name: "Jigawa", d: "M571.5,101.44l-11.75-2.5-2.92-11.75-12.5-2.92-10.25,5.67-7-9.17-14.42,10.25-11.75,2.92-10.42,6.5-15.42,2.5,10.25,10.67-3.33,11.08-15.75,9-11.92,2.5,8.33,10.25,2.92,8.33-2.92,18.58,3.75,9.83-4,10.25,9.83,5.67,14.42,2.92,9.17-5.67,18.58,2.92,13.17,11.08,14.83,12.5,17.5,3.33,15-10.25,12.92-7.5Z" },
    { id: "NG-KD", name: "Kaduna", d: "M439.51,289.43l-2.66-10.65-9.06-1.07-8.26,1.86-1.86,5.86-1.07,7.72,3.46,9.59,2.13,11.45-3.2,10.92-10.65,10.12-11.45,4.79-15.18-2.13-10.12.53-12.25,9.85-8.25-2.13-11.18,5.06-11.18-1.59-5.06,6.39-9.32,12.25-8.25,10.92-11.72,9.32-9.32,15.45-12.51,13.85-9.32,15.18-1.86,2.93,10.39,12.25,10.12,5.32-2.39,11.18-8.25,11.18-2.39,18.1-1.06,12.25,5.32,13.05,2.93,13.58,2.13,12.78,13.85,13.31-4.26,8.52,15.18,12.51,14.38,15.18,12.52-1.33,10.39-5.06,13.85,6.12,14.91,18.1,8,3.73Z" },
    { id: "NG-KN", name: "Kano", d: "M519.25,142.02l-13.17-11.08-18.58-2.92-9.17,5.67-14.42-2.92-5.67-9.83-10.25-10.25-9.83,4-18.58-3.75-2.92-8.33-8.33-10.25,11.92-2.5,15.75-9,3.33-11.08-10.25-12.5-12.08-8.33-14.67-11.92-11.08-13.75-9.42-15.25-6.08,1.06-10.65-2.13-10.12,1.07-11.18,8.25,2.39,11.18-5.32,10.12-12.25-10.39-2.93-15.18,1.86-13.85,9.32-15.45,12.51-9.32,9.32-10.92,11.72-12.25,8.25-6.39,9.32,5.06,1.59,11.18-5.06,11.18,2.13,8.25,12.25-9.85,10.12,15.18-2.13,11.45,4.79,10.65,10.12,3.2,10.92,2.13,11.45,3.46,9.59,1.07,7.72,2.93,9.6,10.39,1.07Z" },
    { id: "NG-KT", name: "Katsina", d: "M477.5,70.94l-14.42-2.92-9.17-5.67-18.58,2.92-13.17,11.08-1.06,10.65,2.13,10.12-1.07,11.18-8.25-2.39-11.18,5.32-10.12,12.25-10.39-2.93-15.18-1.86-13.85,9.32-15.45-12.51-12.78-22.37-9.32-14.38,3.46-13.05,10.39-6.39,15.71,1.59,18.9-10.65,14.65,4.26,14.38,11.18,2.75,12.5,12.75-8.17,11.08-4.42,14.42,2.92,9.17,5.67,18.58,2.92,9.17,5.67,14.42,2.92,5.67,9.83-10.25,10.25Z" },
    { id: "NG-KE", name: "Kebbi", d: "M247.93,243.68l-8.25-16.51-10.39-12.51-9.05-10.92-12.25-10.12-16.24,5.06-11.72,1.33-14.11,10.92-9.59,13.05-1.59,15.98,9.85,14.11,10.39,11.45,11.18,9.32,12.78,22.37,9.32,14.38-3.46,13.05-10.39,6.39-15.71-1.59-18.9,10.65-14.65-4.26-14.38-11.18-2.75-12.5Z" },
    { id: "NG-KO", name: "Kogi", d: "M439.18,458.12l-13.58,1.33-11.45,7.72-10.12,1.06-15.98-4.26-12.51-11.45-6.12-13.05-4.26-12.25,2.13-13.05,9.32-10.92,10.38-11.18,12.25-1.59,10.92,11.45,7.72,9.85,5.86-10.92,10.12-5.86,2.39,11.98-3.46,10.92,2.39-11.98,10.12-5.86,15.71-1.59,10.92-12.78,10.12,2.39,1.33,10.12-9.05,2.39-10.39,3.46-12.78,2.66-1.59-11.18-2.93-9.32Z" },
    { id: "NG-KW", name: "Kwara", d: "M328.7,354.91l-10.39-11.45-9.85-14.11-1.59-15.98-9.59-13.05-14.11-10.92-11.72-1.33-16.24,5.06-12.25-10.12-9.05-10.92-10.39-12.51-8.25-16.51-10.39,1.59-11.18,14.11,3.46,14.91,10.65,12.78,5.86,13.31-2.13,11.72-8.52,10.12-9.85,11.98-2.66,13.58,3.2,12.25,12.25,12.51,15.98,4.26,10.12,1.06Z" },
    { id: "NG-LA", name: "Lagos", d: "M281.42,481.47l-13.31,2.66-12.25-4.53-2.93-9.85-1.59-8.79,4-8.52,11.45-3.2,14.11,5.59,2.13,8.52Z" },
    { id: "NG-NA", name: "Nasarawa", d: "M519.16,354.91l-9.05,8.25-3.73,11.18-.27,14.65-14.38,9.59-20.24,16.51-20.77-6.12-2.66-10.92-8.25-15.98-11.18-15.18-17.57,11.45-12.51-4-13.58-10.39-15.71-11.72-13.05-2.66-12.25-1.59,5.06-11.18,8.79-3.73,9.85-1.59,9.05-10.39,13.31-10.12,8.52-4.26,12.51,15.18,14.38,15.18,12.52,1.33,10.39,5.06,13.85,6.12,14.91,18.1Z" },
    { id: "NG-NI", name: "Niger", d: "M368.1,234.63l-10.39-1.59-11.18,14.11,3.46,14.91,10.65,12.78,5.86,13.31-2.13,11.72-8.52,10.12-9.85,11.98-2.66,13.58,3.2,12.25,12.25,12.51,15.98,4.26-10.12-1.06,11.45-7.72,10.12,10.92,10.92-11.45,12.78-1.86,7.72,9.85-5.86,10.92,2.13,13.05-4.26,12.25-6.12,13.05-12.51,12.51-11.45-15.98-4.26-15.18-2.13,11.45-4.79,10.65-10.12-3.2-10.92,2.13-11.45,3.46,9.59,1.07,7.72-1.86-5.86-8.26-1.86-9.06-1.07,2.66-10.65-2.39-18.1,1.06-12.25-5.32-13.05-2.93-13.58-2.13-12.78-13.85-13.31,4.26-8.52-15.18-12.51-15.45,12.51-9.32,9.32-10.92,11.72-12.25,8.25-6.39,9.32,5.06,1.59,11.18-5.06,11.18,2.13,8.25,12.25-9.85-10.12,.53Z" },
    { id: "NG-OG", name: "Ogun", d: "M281.42,481.47l-2.13-8.52-14.11-5.59-11.45,3.2-4,8.52,1.59,8.79,2.93,9.85,12.25,4.53,13.31-2.66,1.59-8.79-1.33-9.32-10.12-4.53,1.33-9.85-2.39,11.98-3.46-10.92,3.46,10.92,10.12,10.92,13.58-1.33,11.45-7.72,10.12-1.06Z" },
    { id: "NG-ON", name: "Ondo", d: "M387.93,446.67l-15.71-1.59-10.12,5.86-2.39-11.98,1.33-9.85-10.12,4.53,1.33-9.32-1.59,8.79,1.06-10.92,10.12-10.92,10.38-11.18,12.25-1.59,10.92,11.45,7.46-9.59,11.45-4.53,12.78,1.86,7.72,9.85Z" },
    { id: "NG-OS", name: "Osun", d: "M347.04,424.06l-7.72-9.85-12.78-1.86-7.46-9.59-11.45,4.53-12.78-1.86-7.72-9.85,5.86-10.92,10.38-11.18,12.25-1.59,10.92,11.45-1.06,10.92-1.33,9.32-1.59,8.79-13.31,2.66,12.25,4.53,1.59,8.79,10.12,4.53,1.33,9.85Z" },
    { id: "NG-OY", name: "Oyo", d: "M252.19,451.95l-1.33-9.85-10.12-4.53-1.59-8.79-12.25-4.53-13.31,2.66-1.59,8.79-2.93,9.85,12.25,4.53,13.31-2.66,1.59,8.79,1.33-9.32-10.12-4.53,1.33-9.85-2.39-11.98,3.46,10.92,3.46-10.92,10.12,10.92-10.65-12.78-3.46-14.91-11.18-14.11-10.39,1.59,8.25,16.51,10.39,12.51,9.05,10.92-10.12,1.06,15.98-4.26,12.25-12.51,3.2-12.25,2.66-13.58-11.98,2.66-10.12-9.85-11.72,8.52-13.31-2.13Z" },
    { id: "NG-PL", name: "Plateau", d: "M604.42,240.23l-11.92-11.5-21.5-12.92-12.92-24.25-6.08-15.25-9.42-13.75-11.08-11.92-14.67-8.33-12.08-12.5-10.25-11.08-3.33-15.75-9,2.5-11.92,10.25-2.92-8.33-2.92-10.25-4-9.83,3.75-18.58-2.92-9.17-5.67-14.42-2.92-11.08,4.42-12.75,13.85-13.31,12.78-2.13,13.58-2.93,13.05-5.32,12.25-1.06,18.1-2.39,11.18-8.25-11.18,2.39-5.32,10.12-12.25-2.93,10.39-15.18-1.86,13.85-9.32-15.45,12.51-9.32,9.32,10.92-11.72,12.25-8.25-6.39,9.32-5.06,1.59,11.18-5.06-11.18,2.13-8.25,12.25-9.85-10.12,15.18-2.13,11.45,4.79,10.65,10.12,3.2,10.92-2.13,11.45-3.46,9.59,1.07,7.72,2.93-9.6,10.39,1.07,8-3.73,14.91,18.1,8.79,9.59,17.57-11.45,15.18,11.18,8.25,15.98,2.66,10.92,20.77,6.12,20.24,16.51,14.38,9.59,.27,14.65Z" },
    { id: "NG-RI", name: "Rivers", d: "M536.8,506.71l-13.59-1.33-.26-5.32,13.85-6.39,2.93-11.18-5.06,11.18-9.05,4.79-16.24-9.32-5.86-9.85-15.71,6.12-9.32,1.33,1.07,11.72,4.26,9.59,10.92,10.39,11.18,2.39-3.46,3.73-1.06,8.25-3.73,3.2-2.13,10.12,7.72-1.33,12.25-.27-11.45,4.53,1.33,11.18,8.52-16.51Z" },
    { id: "NG-SO", name: "Sokoto", d: "M247.93,243.68l-9.85-14.11,1.59-15.98,9.59-13.05,14.11-10.92,11.72-1.33,16.24,5.06,12.25-10.12,9.05-10.92,10.39-12.51,8.25-16.51-11.18,1.86-13.05,10.12-14.65,10.39-13.85,3.2-12.78-4.26-15.71-10.92-12.51-5.32-15.98,1.33-14.91,9.05-12.78,14.38-10.92,13.31-2.93,12.51,11.98,12.25,10.65,2.75-12.5-14.38,11.18-14.65,4.26-18.9,10.65-15.71,1.59-10.39-6.39-3.46,13.05Z" },
    { id: "NG-TA", name: "Taraba", d: "M662.3,425.13l-11.75-10.65-2.62-12.22-11-13.83,2.26-19.12,2.62,11,17.25,18.41,22.15,2.26,10.65-11.38,2.26-16.15-7.28-20.15,4.88-2.26-10.28-8.88-1.88-14.32,6.15-10.28,12.6-11,10.28-1.51,16.15,2.62,8.88-2.26,21.78-13.83-6.52-4.88,14.17,2.33-14.38-16.42-12.08-14.38-13.17-11.25-2.14-2.33,14.58-15.63,14.17-14.17,17.46,2.83,12.29-14.83,11.42,14.58-17.75-30.67-26.42-17.75-11.25-24.33,25.42-11.25,30.83-19,25.42-16.83,21.08-16.42,26.83-18.58-10.42,10.75-12.83,1.5-10.58-12.08-12.5-14.67-8.33-11.08-11.92-13.75,9.42-14.38,9.59-14.65-.27,3.73-11.18-9.05-8.25-5.59-15.18,6.12-12.25,10.39-3.73,15.71,3.73,12.51,20.24,10.39,20.51,11.72,13.05,15.71,11.72Z" },
    { id: "NG-YO", name: "Yobe", d: "M762.3,101.44l-21.42-2.33-14.58,6-14.58,28.33-11.42,14.17-2.83-12.29,14.83-14.38-12.29-17.46,2.33-14.58-14.17-14.17-14.38,16.42-12.08-14.38-13.17-11.25,2.14,2.33-14.17,14.17-14.38,16.15-14.7,21,19.12,11,2.26-28.75-17.21-14.83-12.5-13.17-11.08-18.58,2.92-9.17-5.67-14.42,2.92-5.67,9.83-10.25,10.25,9.83,4,18.58-3.75,2.92,8.33,8.33,10.25,2.92,11.92-2.5-15.75-9,3.33-11.08,10.25,10.67,15.42-2.5,10.42-6.67,12.5,2.92,11.25-2.92,17.5,3.33,15,10.25,12.92,7.5,13.58,10.25Z" },
    { id: "NG-ZA", name: "Zamfara", d: "M368.1,234.63l-12.25-8.25,6.39-9.32,5.06-1.59,11.18,5.06-2.13-8.25,12.25-9.85-10.12-.53-15.18,2.13-11.45-4.79-10.65-10.12-3.2-10.92,2.13-11.45-3.46-9.59-1.07-7.72,1.86-5.86,8.26-1.86-9.06-1.07-2.66-10.65-1.06-10.65-2.13,10.12-1.07,11.18-8.25-2.39-11.18,5.32-10.12-12.25-10.39,2.93-15.18,1.86-13.85,9.32-15.45,12.51-12.78-22.37,9.32-14.38,12.78-22.37,11.18-9.32,10.39-11.45-10.39,1.59-8.25-16.51,10.39,1.59-11.18,14.11,3.46,14.91,10.65,12.78,5.86,13.31-2.13,11.72-8.52,10.12-9.85,11.98-2.66,13.58,3.2,12.25,12.25,12.51,15.98-4.26,10.12-1.06-11.45,7.72,10.12,10.92,10.92-11.45,12.78-1.86,7.72,9.85-5.86,10.92,2.13,13.05-4.26,12.25-6.12,13.05-12.51-11.45,15.98-4.26,15.18,2.13,11.45,4.79Z" },
  ];
  

  return (
    <svg viewBox="150 50 700 500" className="w-full h-auto drop-shadow-sm">
      <g>
        {states.map(state => (
          <path
            key={state.id}
            d={state.d}
            fill={getStateColor(state.name)}
            stroke="hsl(var(--card))"
            strokeWidth="0.5"
            onClick={() => onStateClick(state.name)}
            className={cn(
              "cursor-pointer transition-all duration-200",
              "hover:opacity-80"
            )}
          >
            <title>{state.name}</title>
          </path>
        ))}
      </g>
    </svg>
  );
};

export default NigeriaMap;
